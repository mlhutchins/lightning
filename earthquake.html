<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC20mYB0qVgC_Ic3vpry-v6rRNp0zLfkIo&sensor=false">
    </script>
    <script type="text/javascript">
         


        var map;
        
        function initialize() {
            var mapOptions = {
                zoom: 2,
                center: new google.maps.LatLng(2.8, -187.3),
                mapTypeId: google.maps.MapTypeId.TERRAIN
            };
        
            map = new google.maps.Map(document.getElementById('map-canvas'),
                mapOptions);
            
            // Create a script tag and set the USGS URL as the source.
            var script = document.createElement('script');
            script.src = 'http://earthquake.usgs.gov/earthquakes/feed/geojsonp/1.0/week';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(script, s);
        }
        
        window.eqfeed_callback = function(results) {
            for (var i = 0; i < results.features.length; i++) {
                var earthquake = results.features[i];
                var coords = earthquake.geometry.coordinates;
                var latLng = new google.maps.LatLng(coords[1],coords[0]);
                var marker = new google.maps.Marker({
                    position: latLng,
                    map: map,
                    icon: getCircle(earthquake.properties.mag)
                });
            }
        }
        
        function getCircle(magnitude) {
            return {
                path: google.maps.SymbolPath.CIRCLE,
                fillColor: 'red',
                fillOpacity: .2,
                scale: Math.pow(2, magnitude) / Math.PI,
                strokeColor: 'white',
                strokeWeight: .5
            };
        }

        
        google.maps.event.addDomListener(window, 'load', initialize);
        
    </script>
  </head>
  <body>
    <div id="map-canvas" style="width: 100%; height: 100%">
    </div>
  </body>
</html>